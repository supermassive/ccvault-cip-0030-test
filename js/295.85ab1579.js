"use strict";(self["webpackChunkccvault_cip_0030_test"]=self["webpackChunkccvault_cip_0030_test"]||[]).push([[295],{8295:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Mt});var r=n(3673);const o=(0,r._)("div",{class:"p-2 bg-blue-700 text-white font-mono font-black flex flex-row flex-nowrap justify-between"},[(0,r._)("span",null,[(0,r._)("a",{href:"https://ccvault.io",target:"_blank"},"ccvault.io"),(0,r.Uk)(" - dapp-connector test page - v1.1.0")])],-1),s={class:"grid grid-cols-12 gap-2 p-2"};function i(e,t,n,i,l,c){const u=(0,r.up)("check-initial-api"),a=(0,r.up)("check-full-api-legacy"),d=(0,r.up)("check-full-api-cip");return(0,r.wg)(),(0,r.iD)(r.HY,null,[o,(0,r._)("div",s,[(0,r.Wm)(u,{onConnect:e.onConnect},null,8,["onConnect"]),e.showFullLegacyCheck?((0,r.wg)(),(0,r.j4)(a,{key:0})):(0,r.kq)("",!0),e.showFullCIPCheck?((0,r.wg)(),(0,r.j4)(d,{key:1,"wallet-name":e.cipWalletName},null,8,["wallet-name"])):(0,r.kq)("",!0)])],64)}var l=n(1959),c=n(2323);const u={class:"col-span-12 grid grid-cols-12 gap-2"},a=["onClick"];function d(e,t,n,o,s,i){const l=(0,r.up)("api-test-ui");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",u,[e.showConnectLegacy?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"col-span-6 md:col-span-4 xl:col-span-3 2xl:col-span-2 px-2 h-6 text-sm font-semibold text-indigo-600 hover:text-indigo-900 rounded-full bg-gray-200",onClick:t[0]||(t[0]=t=>e.$emit("connect","legacy"))}," Connect: Legacy Api ")):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.walletNames,(t=>((0,r.wg)(),(0,r.iD)("button",{class:"col-span-6 md:col-span-4 xl:col-span-3 2xl:col-span-2 px-2 h-6 text-sm font-semibold text-indigo-600 hover:text-indigo-900 rounded-full bg-gray-200",onClick:n=>e.$emit("connect",t),key:t}," Connect CIP-0030: "+(0,c.zw)(t),9,a)))),128))]),(0,r.Wm)(l,{"api-test":e.apiTest,"perform-check":e.performCheck},null,8,["api-test","perform-check"])],64)}var g;(function(e){e[e["debug"]=1]="debug",e[e["important"]=2]="important",e[e["info"]=4]="info",e[e["succeeded"]=8]="succeeded",e[e["warning"]=16]="warning",e[e["error"]=32]="error"})(g||(g={}));const f=g.important,p={};function h(e,t){let n=p[e];switch(n||(n=[],p[e]=n),t.level){case g.debug:t.iconCSS="                      text-gray-400";break;case g.important:t.iconCSS="                      text-gray-600";break;case g.info:t.iconCSS="mdi mdi-circle-medium text-gray-600";break;case g.succeeded:t.iconCSS="mdi mdi-check         text-green-600";break;case g.warning:t.iconCSS="mdi mdi-alert         text-yellow-600";break;case g.error:t.iconCSS="mdi mdi-close-thick   text-red-600";break}n.push(t)}function b(e){let t=p[e];t||(t=(0,l.qj)([]),p[e]=t),t.splice(0)}function m(e){let t=p[e];return t||(t=(0,l.qj)([]),p[e]=t),t}function y(e){b(e)}function k(e,t){h(e,{msg:t,level:g.debug,iconCSS:""})}function w(e,t){h(e,{msg:t,level:g.important,iconCSS:""})}function x(e,t){h(e,{msg:t,level:g.info,iconCSS:""})}function v(e,t){h(e,{msg:t,level:g.succeeded,iconCSS:""})}function A(e,t){h(e,{msg:t,level:g.warning,iconCSS:""})}function C(e,t){h(e,{msg:t,level:g.error,iconCSS:""})}function U(){return{getLog:m,clearLog:y,logLevel:f,addLogDebug:k,addLogImportant:w,addLogInfo:x,addLogSucceeded:v,addLogWarning:A,addLogError:C}}var L;function S(e,t,n,r=!0){const o={status:L.idle,statusLabel:"idle",statusCSS:"bg-gray-200   text-gray-800",label:e,buttonLabel:t,itemList:[],showHeader:r};for(const s of n)o.itemList.push({label:s,status:L.idle});return o}function T(e,t,n){switch(e.status=t,t){case L.idle:e.statusLabel=null!==n&&void 0!==n?n:"idle";break;case L.running:e.statusLabel=null!==n&&void 0!==n?n:"running";break;case L.succeeded:e.statusLabel=null!==n&&void 0!==n?n:"succeeded";break;case L.failed:e.statusLabel=null!==n&&void 0!==n?n:"failed";break}switch(t){case L.idle:e.statusCSS="bg-gray-100   text-gray-600";break;case L.running:e.statusCSS="bg-yellow-100 text-yellow-800";break;case L.succeeded:e.statusCSS="bg-green-100  text-green-800";break;case L.failed:e.statusCSS="bg-red-100    text-red-800";break}}(function(e){e["idle"]="idle",e["running"]="...",e["succeeded"]="ok",e["failed"]="failed"})(L||(L={}));const F=["enable","isEnabled","getNetworkId","onNetworkChange","onAccountChange","getBalance","getChangeAddress","getCollateral","getRewardAddress","getUnusedAddresses","getUsedAddresses","getUtxos","signData","signTx","submitTx"],I=["getNetworkId","onNetworkChange","onAccountChange","getBalance","getChangeAddress","getCollateral","getRewardAddresses","getUnusedAddresses","getUsedAddresses","getUtxos","signData","signTx","submitTx"],q=["enable","isEnabled"],j=["apiVersion","name","icon"];function H(e,t,n){let r=!1;return n.forEach((function(n){const o=t[n];void 0!==o&&"function"===typeof o?v(e,'&bull; "'+n+'" is a function'):(r=!0,C(e,'&bull; "'+n+'" does not exist'))})),!r}function N(e,t,n){let r=!1;return n.forEach((function(n){const o=t[n];void 0!==o?v(e,'&bull; "'+n+'": '+o):(r=!0,C(e,'&bull; "'+n+'" does not exist'))})),!r}const E=(e,t,n,r=[])=>{let o=n(...r);if(o instanceof Promise)return v(e,'&bull; "'+t+'": returns promise'),o;throw C(e,'&bull; "'+t+'" does not return a promise'),new Error('"'+t+'" does not return a promise')};function P(e){return"string"===typeof e?"string":"number"===typeof e?"number":"undefined"===typeof e?"undefined":"boolean"===typeof e?"boolean":"object"===typeof e?"object":typeof e}const D=e=>"boolean"===P(e),_=e=>"number"===P(e),Z=e=>"string"===P(e),R=e=>"object"===P(e),B=e=>Array.isArray(e),O=(0,l.qj)([]);function G(e){O.push(e)}const W={class:"col-span-6 md:col-span-4 xl:col-span-3 2xl:col-span-2 grid grid-cols-12 gap-1 mt-2"},J={key:0,class:"col-span-12 italic font-bold text-center text-sm"},z={key:1,class:"col-span-12"},Y={class:"col-span-12 grid grid-cols-2 gap-1 h-6 text-xs"},V=(0,r._)("hr",{class:"col-span-12"},null,-1),M={class:"col-span-12 grid grid-cols-2 gap-1 h-6 text-xs"},$={class:"col-span-12 h-60 border border-gray-200 rounded-xl p-1.5 inline-flex flex-col flex-nowrap text-left text-sm max-h-24 overflow-auto"},K={key:0,class:"w-full flex flex-row justify-center items-center"},Q=["innerHTML"];function X(e,t,n,o,s,i){const l=(0,r.up)("q-toggle"),u=(0,r.up)("q-spinner-ios");return(0,r.wg)(),(0,r.iD)("div",W,[e.apiTest.showHeader?((0,r.wg)(),(0,r.iD)("div",J,(0,c.zw)(e.apiTest.label),1)):(0,r.kq)("",!0),e.apiTest.showHeader?((0,r.wg)(),(0,r.iD)("hr",z)):(0,r.kq)("",!0),(0,r._)("div",Y,[(0,r._)("span",{class:(0,c.C_)(["px-2 font-semibold rounded-full flex justify-center items-center",e.apiTest.statusCSS])},(0,c.zw)(e.apiTest.status),3),(0,r._)("button",{class:"px-2 font-semibold rounded-full flex justify-center items-center text-indigo-600 hover:text-indigo-900 bg-gray-200",onClick:t[0]||(t[0]=(...t)=>e.performCheck&&e.performCheck(...t))},(0,c.zw)(e.apiTest.buttonLabel),1)]),(0,r.WI)(e.$slots,"buttons"),V,(0,r._)("div",M,[(0,r.Wm)(l,{modelValue:e.showAllLogs,"onUpdate:modelValue":t[1]||(t[1]=t=>e.showAllLogs=t),label:"Show all logs",class:"-my-2"},null,8,["modelValue"]),(0,r._)("button",{class:"px-2 font-semibold text-indigo-600 hover:text-indigo-900 rounded-full bg-gray-200",onClick:t[2]||(t[2]=(...t)=>e.clearLogs&&e.clearLogs(...t))}," Clear Logs ")]),(0,r._)("div",$,["..."===e.apiTest.status?((0,r.wg)(),(0,r.iD)("div",K,[(0,r.Wm)(u)])):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.logs,((e,t)=>((0,r.wg)(),(0,r.iD)("span",{class:(0,c.C_)(["text-gray-500 -mb-1.5",0===t?"-mt-1.5":""]),key:"item-"+t},[(0,r._)("i",{class:(0,c.C_)(["text-lg mr-1",e.iconCSS])},null,2),(0,r._)("span",{class:"text-xs",style:{"line-height":"0.5rem"},innerHTML:e.msg},null,8,Q)],2)))),128))]),(0,r.WI)(e.$slots,"content")])}const ee=(0,r.aZ)({name:"apiTestUi",props:{apiTest:{type:Object,required:!0},performCheck:{type:Function,required:!0}},setup(e,t){const n=(0,l.Fl)((()=>t.slots.hasOwnProperty("buttons"))),r=(0,l.Fl)((()=>t.slots.hasOwnProperty("content"))),{getLog:o,clearLog:s}=U(),i=e.apiTest.label,c=o(i),u=(0,l.iH)(!1),a=(0,l.Fl)((()=>c.filter((e=>e.level===g.error||e.level<=(u.value?g.error:g.important)))));function d(){s(i)}return{logs:a,showAllLogs:u,clearLogs:d,hasSlotButtons:n,hasSlotContent:r}}});var te=n(4260),ne=n(9172),re=n(8506),oe=n(7518),se=n.n(oe);const ie=(0,te.Z)(ee,[["render",X]]),le=ie;se()(ee,"components",{QToggle:ne.Z,QSpinnerIos:re.Z});const ce=(0,r.aZ)({name:"checkInitialApi",emits:["connect"],components:{ApiTestUi:le},setup(){const{getLog:e,clearLog:t,addLogImportant:n,addLogInfo:r,addLogSucceeded:o,addLogWarning:s,addLogError:i}=U(),c=(0,l.qj)(S("Initial API Functions","Detect APIs",["- window.cardano is present","- list all available wallet namespaces"])),u=c.label,a=e(u),d=(0,l.iH)(!1),f=(0,l.iH)(!1),p=(0,l.Fl)((()=>c.status===L.succeeded)),h=(0,l.iH)([]),b=(0,l.Fl)((()=>a.filter((e=>e.level===g.error||e.level<=(d.value?g.error:g.important)))));function m(){t(u),f.value=!1,h.value.splice(0),T(c,L.idle)}function y(e){i(u,"<b>"+e+"</b>"),T(c,L.failed)}function k(){m();let e=!1;if("undefined"===typeof window)return y("No window object present.");if(o(u,"window object present."),"object"!==typeof window.cardano)return y("No cardano object present.");o(u,"cardano object present.");const t=window.cardano;if(t.hasOwnProperty("isEnabled")){if(s(u,"<b>Legacy api detected.</b>"),r(u,"Checking Legacy Api"),!H(u,t,F))return y("Legacy api is broken.");o(u,"Legacy api available."),e=!0}let l=!1;for(const n in t){let e=!1;F.some((e=>e===n))||(I.some((e=>e===n))||j.some((e=>e===n))||(r(u,"Checking CIP-0030 initial api: "+n),H(u,t[n],q)&&N(u,t[n],j)?o(u,"CIP-0030 initial api available."):(e=!0,l=!0,i(u,"CIP-0030 initial api broken.")),e||h.value.push(n)))}if(l)return y("One extension is not configured correctly.");f.value=e,n(u,"<b><i>All checks passed.</i></b>");for(const r of h.value)n(u,"Wallet: "+t[r].name),n(u,"apiVersion: "+t[r].apiVersion),n(u,'icon: <img src="'+t[r].icon+'">');T(c,L.succeeded)}return m(),G(c),{logs:b,showAllLogs:d,apiTest:c,performCheck:k,showConnectButtons:p,showConnectLegacy:f,walletNames:h}}}),ue=(0,te.Z)(ce,[["render",d]]),ae=ue;function de(e,t,n,o,s,i){const l=(0,r.up)("api-test-ui"),c=(0,r.up)("check-get-network-id"),u=(0,r.up)("check-get-balance"),a=(0,r.up)("check-get-utxos"),d=(0,r.up)("check-get-used-addresses"),g=(0,r.up)("check-get-unused-addresses"),f=(0,r.up)("check-get-reward-address"),p=(0,r.up)("check-get-change-address"),h=(0,r.up)("check-sign-data"),b=(0,r.up)("check-sign-tx");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(l,{"api-test":e.apiTest,"perform-check":e.performCheck},null,8,["api-test","perform-check"]),e.getNetworkIdFunction?((0,r.wg)(),(0,r.j4)(c,{key:0,"log-id-suffix":"legacy","get-network-id":e.getNetworkIdFunction},null,8,["get-network-id"])):(0,r.kq)("",!0),e.getBalanceFunction?((0,r.wg)(),(0,r.j4)(u,{key:1,"log-id-suffix":"legacy","get-balance":e.getBalanceFunction},null,8,["get-balance"])):(0,r.kq)("",!0),e.getUtxosFunction?((0,r.wg)(),(0,r.j4)(a,{key:2,"log-id-suffix":"legacy","get-utxos":e.getUtxosFunction},null,8,["get-utxos"])):(0,r.kq)("",!0),e.getUsedAddressesFunction?((0,r.wg)(),(0,r.j4)(d,{key:3,"log-id-suffix":"legacy","get-used-addresses":e.getUsedAddressesFunction,onOnUsedAddress:e.onUsedAddress},null,8,["get-used-addresses","onOnUsedAddress"])):(0,r.kq)("",!0),e.getUnusedAddressesFunction?((0,r.wg)(),(0,r.j4)(g,{key:4,"log-id-suffix":"legacy","get-unused-addresses":e.getUnusedAddressesFunction},null,8,["get-unused-addresses"])):(0,r.kq)("",!0),e.getRewardAddressFunction?((0,r.wg)(),(0,r.j4)(f,{key:5,"log-id-suffix":"legacy","get-reward-address":e.getRewardAddressFunction},null,8,["get-reward-address"])):(0,r.kq)("",!0),e.getChangeAddressFunction?((0,r.wg)(),(0,r.j4)(p,{key:6,"log-id-suffix":"legacy","get-change-address":e.getChangeAddressFunction},null,8,["get-change-address"])):(0,r.kq)("",!0),e.signDataFunction&&e.signDataAddress?((0,r.wg)(),(0,r.j4)(h,{key:7,"log-id-suffix":"legacy","sign-data":e.signDataFunction,addr:e.signDataAddress},null,8,["sign-data","addr"])):(0,r.kq)("",!0),e.signTxFunction&&e.submitTxFunction?((0,r.wg)(),(0,r.j4)(b,{key:8,"log-id-suffix":"legacy","sign-tx":e.signTxFunction,"submit-tx":e.submitTxFunction},null,8,["sign-tx","submit-tx"])):(0,r.kq)("",!0)],64)}function ge(e,t,n,o,s,i){const l=(0,r.up)("api-test-ui");return(0,r.wg)(),(0,r.j4)(l,{"api-test":e.apiTest,"perform-check":e.performCheck},null,8,["api-test","perform-check"])}var fe=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function i(e){try{c(r.next(e))}catch(t){s(t)}}function l(e){try{c(r["throw"](e))}catch(t){s(t)}}function c(e){e.done?n(e.value):o(e.value).then(i,l)}c((r=r.apply(e,t||[])).next())}))};const pe=(0,r.aZ)({name:"checkGetNetworkId",props:{getNetworkId:{type:Function,required:!0},logIdSuffix:{type:String,required:!0}},components:{ApiTestUi:le},setup(e){const{getLog:t,clearLog:n,addLogSucceeded:r,addLogError:o}=U(),s=(0,l.qj)(S("getNetworkId","Check",["- check getNetworkId function return type"])),i=s.label,c=t(i),u=(0,l.iH)(!1),a=(0,l.Fl)((()=>c.filter((e=>e.level===g.error||e.level<=(u.value?g.error:g.important)))));function d(){n(i),T(s,L.idle)}function f(e){o(i,"<b>"+e+"</b>"),T(s,L.failed)}function p(){return fe(this,void 0,void 0,(function*(){d(),T(s,L.running);try{let t=yield E(i,"getNetworkId",e.getNetworkId);if(!_(t))return f("getNetworkId: return type not a number");switch(r(i,'&bull; "getNetworkId" returned: '+t),t){case 0:w(i,'<b><i>network: "testnet"</i></b>');break;case 1:w(i,'<b><i>network: "mainnet"</i></b>');break;case 141:w(i,'<b><i>network: "guild"</i></b>');break}}catch(t){return o(i,"getNetworkId: error: "+JSON.stringify(t,null,2)),f(t.message)}T(s,L.succeeded)}))}return d(),G(s),p(),{logs:a,showAllLogs:u,apiTest:s,performCheck:p}}}),he=(0,te.Z)(pe,[["render",ge]]),be=he;function me(e,t,n,o,s,i){const l=(0,r.up)("api-test-ui");return(0,r.wg)(),(0,r.j4)(l,{"api-test":e.apiTest,"perform-check":e.performCheck},null,8,["api-test","perform-check"])}var ye=n(4244),ke=n(8249);const we=e=>Uint8Array.from(ye.lW.from(e,"hex")),xe=e=>ye.lW.from(e).toString("hex"),ve=e=>{var t,n,r,o,s,i;t="",r=e.length,n=0;while(n<r)switch(o=e[n++],o>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(o);break;case 12:case 13:s=e[n++],t+=String.fromCharCode((31&o)<<6|63&s);break;case 14:s=e[n++],i=e[n++],t+=String.fromCharCode((15&o)<<12|(63&s)<<6|(63&i)<<0);break}return t},Ae=e=>{try{return ke.B4R.from_bytes(we(e))}catch(t){throw new Error("Error: decodeCborValue: not decodable: "+e)}},Ce=e=>{try{return ke.kLt.from_bytes(we(e))}catch(t){throw new Error("Error: decodeCborAddress: not decodable: "+e)}},Ue=e=>{try{return ke.ZAD.from_bytes(we(e))}catch(t){throw new Error("Error: decodeCborUtxo: not decodable: "+e)}},Le=(e,t)=>{try{return e.keys().get(t)}catch(n){throw new Error("Error: getMultiAssetPolicyId: "+t)}},Se=(e,t)=>{try{let n=e.get(t);if(n)return n}catch(n){throw new Error("Error: getMultiAssetFromPolicyId: cannot read: "+t)}throw new Error("Error: getMultiAssetFromPolicyId: no asset for: "+t)},Te=(e,t)=>{try{return e.keys().get(t)}catch(n){throw new Error("Error: getAssetName: no asset name at position: "+t)}},Fe=(e,t)=>{try{let n=e.get(t);if(n)return n}catch(n){throw new Error("Error: getAssetAmount: cannot read: "+t.name())}throw new Error("Error: getAssetAmount: "+t.name())},Ie=e=>{try{const t=ve(e.name());return t.length>0?t:xe(e.name())}catch(t){throw new Error("Error: getAssetNameReadable")}},qe=e=>{try{return xe(e.to_bytes())}catch(t){throw new Error("Error: getPolicyNameReadable")}},je=e=>void 0!==e.multiasset(),He=(e,t)=>{try{const n=t.coin();w(e,"<b><i>lovelace: "+n.to_str()+"</i></b>")}catch(n){C(e,"&nbsp;&nbsp;&bull; could not parse coin")}},Ne=(e,t)=>{try{if(je(t)){w(e,"<i>assets:</i>"),v(e,"&nbsp;&nbsp;&bull; balance has multiAsset");const n=t.multiasset(),r=n.keys().len();for(let t=0;t<r;t++){v(e,"&nbsp;&nbsp;&bull; policyId");const r=Le(n,t),o=Se(n,r);v(e,"&nbsp;&nbsp;&bull; policyId has asset");for(let t=0;t<o.keys().len();t++){const n=Te(o,t),s=Fe(o,n);v(e,"&nbsp;&nbsp;&bull; retrieved asset for policyId");const i=Ie(n),l=qe(r);v(e,"&nbsp;&nbsp;&bull; amount: "+s.to_str()),v(e,"&nbsp;&nbsp;&bull; name:   "+i),v(e,"&nbsp;&nbsp;&bull; policy: "+l),w(e,"<b>"+i+": "+s.to_str()+"</b>")}}}}catch(n){C(e,"&nbsp;&nbsp;&bull; could not parse multi assets")}},Ee=(e,t)=>{try{const n=t.to_bech32();return w(e,"<b><i>"+n+"</i></b>"),n}catch(n){C(e,"&nbsp;&nbsp;&bull; could not parse address")}return null},Pe=(e,t)=>{try{const n=t.input(),r=t.output();w(e,"<b><i>"+xe(n.transaction_id().to_bytes())+"#"+n.index()+"</i></b>");const o=r.address();Ee(e,o);const s=r.amount();He(e,s),Ne(e,s)}catch(n){C(e,"&nbsp;&nbsp;&bull; could not parse address")}},De=(e,t,n)=>{try{const r=ke.r$i.from_bytes(we(t)),o=ke.XgB.from_bytes(we(n)),s=ke.YW8["new"](r,o),i=ke.UkV.from_bytes(s.to_bytes()),l=i.transaction_hash();return w(e,"<b><i>serialized: "+xe(l.to_bytes())+"</i></b>"),xe(s.to_bytes())}catch(r){C(e,"&nbsp;&nbsp;&bull; could not serialize transaction")}return null};var _e=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function i(e){try{c(r.next(e))}catch(t){s(t)}}function l(e){try{c(r["throw"](e))}catch(t){s(t)}}function c(e){e.done?n(e.value):o(e.value).then(i,l)}c((r=r.apply(e,t||[])).next())}))};const Ze=(0,r.aZ)({name:"checkGetBalance",props:{getBalance:{type:Function,required:!0},logIdSuffix:{type:String,required:!0}},components:{ApiTestUi:le},setup(e){const{getLog:t,clearLog:n,addLogSucceeded:r,addLogError:o}=U(),s=(0,l.qj)(S("getBalance","Check",["- check getBalance function return types and cbor"])),i=s.label,c=t(i),u=(0,l.iH)(!1),a=(0,l.Fl)((()=>c.filter((e=>e.level===g.error||e.level<=(u.value?g.error:g.important)))));function d(){n(i),T(s,L.idle)}function f(e){o(i,"<b>"+e+"</b>"),T(s,L.failed)}function p(){return _e(this,void 0,void 0,(function*(){d(),T(s,L.running);try{let t=yield E(i,"getBalance",e.getBalance);if(!Z(t))return f("getBalance: return type not string");r(i,'&bull; "getBalance" returned: '+t);const n=Ae(t);r(i,'&bull; "getBalance" valid cbor'),He(i,n),Ne(i,n)}catch(t){return o(i,"getBalance: error: "+JSON.stringify(t,null,2)),f(t.message)}T(s,L.succeeded)}))}return d(),G(s),p(),{logs:a,showAllLogs:u,apiTest:s,performCheck:p}}}),Re=(0,te.Z)(Ze,[["render",me]]),Be=Re;function Oe(e,t,n,o,s,i){const l=(0,r.up)("api-test-ui"),c=(0,r.up)("check-get-utxos-amount");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(l,{"api-test":e.apiTest,"perform-check":e.performCheck},null,8,["api-test","perform-check"]),e.getUtxos&&e.utxoAmount&&"CIP"===e.logIdSuffix?((0,r.wg)(),(0,r.j4)(c,{key:0,"log-id-suffix":e.logIdSuffix,"get-utxos":e.getUtxos,"utxo-amount":e.utxoAmount},null,8,["log-id-suffix","get-utxos","utxo-amount"])):(0,r.kq)("",!0)],64)}function Ge(e,t,n,o,s,i){const l=(0,r.up)("api-test-ui");return(0,r.wg)(),(0,r.j4)(l,{"api-test":e.apiTest,"perform-check":e.performCheck},null,8,["api-test","perform-check"])}var We=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function i(e){try{c(r.next(e))}catch(t){s(t)}}function l(e){try{c(r["throw"](e))}catch(t){s(t)}}function c(e){e.done?n(e.value):o(e.value).then(i,l)}c((r=r.apply(e,t||[])).next())}))};const Je=(0,r.aZ)({name:"checkGetUtxosAmount",props:{getUtxos:{type:Function,required:!0},utxoAmount:{type:String,required:!0},logIdSuffix:{type:String,required:!0}},components:{ApiTestUi:le},setup(e){const{getLog:t,clearLog:n,addLogSucceeded:r,addLogError:o}=U(),s=(0,l.qj)(S("getUtxos(amount)","Check",["- check getUtxos parameter amount and paginate, amount: "+e.utxoAmount])),i=s.label,c=t(i),u=(0,l.iH)(!1),a=(0,l.Fl)((()=>c.filter((e=>e.level===g.error||e.level<=(u.value?g.error:g.important)))));function d(){n(i),T(s,L.idle)}function f(e){o(i,"<b>"+e+"</b>"),T(s,L.failed)}function p(){return We(this,void 0,void 0,(function*(){d(),T(s,L.running);try{let n=yield E(i,"getUtxos",e.getUtxos,[e.utxoAmount]);if(!B(n))return f("getUtxos: return type not array");r(i,'&bull; "getUtxos" returned: '+n);let s=n;for(const e of s){const t=Ue(e);r(i,"&bull; utxo valid cbor"),Pe(i,t),w(i," ")}if(s.length>1){if(w(i,"Testing Paginate: page 1, limit 1"),w(i," "),n=yield E(i,"getUtxos",e.getUtxos,[e.utxoAmount,{page:1,limit:1}]),!B(n))return f("getUtxos: return type not array");r(i,'&bull; "getUtxos" returned: '+n),s=n;for(const e of s){const t=Ue(e);r(i,"&bull; utxo valid cbor"),Pe(i,t),w(i," ")}}w(i,"Testing Paginate: page 9999999, limit 1"),w(i," ");try{return yield E(i,"getUtxos",e.getUtxos,[e.utxoAmount,{page:9999999,limit:1}]),o(i,"getUtxos: No error received"),f("No error received.")}catch(t){w(i,'&bull; "getUtxos" returned error: '+t)}try{return n=yield E(i,"getUtxos",e.getUtxos,["ffffffffff",{page:1,limit:1}]),o(i,"getUtxos: No error received "+JSON.stringify(n,null,2)),f("No error received.")}catch(t){w(i,'&bull; "getUtxos" returned error: '+JSON.stringify(t,null,2))}}catch(t){return o(i,"getUtxos: error: "+JSON.stringify(t,null,2)),f(t.message)}T(s,L.succeeded)}))}return d(),G(s),p(),{logs:a,showAllLogs:u,apiTest:s,performCheck:p}}}),ze=(0,te.Z)(Je,[["render",Ge]]),Ye=ze;var Ve=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function i(e){try{c(r.next(e))}catch(t){s(t)}}function l(e){try{c(r["throw"](e))}catch(t){s(t)}}function c(e){e.done?n(e.value):o(e.value).then(i,l)}c((r=r.apply(e,t||[])).next())}))};const Me=(0,r.aZ)({name:"checkGetUtxos",props:{getUtxos:{type:Function,required:!0},logIdSuffix:{type:String,required:!0}},components:{ApiTestUi:le,CheckGetUtxosAmount:Ye},setup(e){const{getLog:t,clearLog:n,addLogSucceeded:r,addLogError:o}=U(),s=(0,l.qj)(S("getUtxos","Check",["- check getUtxos function return types and cbor"])),i=s.label,c=t(i),u=(0,l.iH)(!1),a=(0,l.Fl)((()=>c.filter((e=>e.level===g.error||e.level<=(u.value?g.error:g.important)))));function d(){n(i),T(s,L.idle)}function f(e){o(i,"<b>"+e+"</b>"),T(s,L.failed)}d(),G(s);const p=(0,l.iH)(null);function h(){return Ve(this,void 0,void 0,(function*(){d(),T(s,L.running);try{let t=yield E(i,"getUtxos",e.getUtxos);if(!B(t))return f("getUtxos: return type not array");r(i,'&bull; "getUtxos" returned: '+t);for(const e of t){const t=Ue(e);r(i,"&bull; utxo valid cbor"),Pe(i,t),w(i," "),null===p.value&&(p.value=t.output().amount().coin().to_str(),p.value=xe(t.output().amount().to_bytes()))}}catch(t){return o(i,"getUtxos: error: "+JSON.stringify(t,null,2)),f(t.message)}T(s,L.succeeded)}))}return h(),{logs:a,showAllLogs:u,apiTest:s,performCheck:h,utxoAmount:p}}}),$e=(0,te.Z)(Me,[["render",Oe]]),Ke=$e;function Qe(e,t,n,o,s,i){const l=(0,r.up)("api-test-ui");return(0,r.wg)(),(0,r.j4)(l,{"api-test":e.apiTest,"perform-check":e.performCheck},null,8,["api-test","perform-check"])}var Xe=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function i(e){try{c(r.next(e))}catch(t){s(t)}}function l(e){try{c(r["throw"](e))}catch(t){s(t)}}function c(e){e.done?n(e.value):o(e.value).then(i,l)}c((r=r.apply(e,t||[])).next())}))};const et=(0,r.aZ)({name:"checkGetUsedAddresses",emits:["onUsedAddress"],props:{getUsedAddresses:{type:Function,required:!0},logIdSuffix:{type:String,required:!0}},components:{ApiTestUi:le},setup(e,{emit:t}){const{getLog:n,clearLog:r,addLogSucceeded:o,addLogError:s}=U(),i=(0,l.qj)(S("getUsedAddresses","Check",["- check getUsedAddresses function return types and cbor"])),c=i.label,u=n(c),a=(0,l.iH)(!1),d=(0,l.Fl)((()=>u.filter((e=>e.level===g.error||e.level<=(a.value?g.error:g.important)))));function f(){r(c),T(i,L.idle)}function p(e){s(c,"<b>"+e+"</b>"),T(i,L.failed)}function h(){return Xe(this,void 0,void 0,(function*(){f(),T(i,L.running);try{let n=yield E(c,"getUsedAddresses",e.getUsedAddresses);if(!B(n))return p("getUsedAddresses: return type not an array");o(c,'&bull; "getUsedAddresses" returned: '+n);const r=n;for(const e of r){const n=Ce(e);o(c,"&bull; addr valid cbor");const r=Ee(c,n);console.log("bech32",r),r&&t("onUsedAddress",{addr:r})}if(r.length>1){if(w(c," "),w(c,"Testing Paginate: page 1, limit 1"),w(c," "),n=yield E(c,"getUsedAddresses",e.getUsedAddresses,[{page:1,limit:1}]),!B(n))return p("getUsedAddresses: return type not an array");o(c,'&bull; "getUsedAddresses" returned: '+n);const t=n;for(const e of t){const t=Ce(e);o(c,"&bull; addr valid cbor");Ee(c,t)}}}catch(n){return s(c,"getUsedAddresses: error: "+JSON.stringify(n,null,2)),p(n.message)}T(i,L.succeeded)}))}return f(),G(i),h(),{logs:d,showAllLogs:a,apiTest:i,performCheck:h}}}),tt=(0,te.Z)(et,[["render",Qe]]),nt=tt;function rt(e,t,n,o,s,i){const l=(0,r.up)("api-test-ui");return(0,r.wg)(),(0,r.j4)(l,{"api-test":e.apiTest,"perform-check":e.performCheck},null,8,["api-test","perform-check"])}var ot=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function i(e){try{c(r.next(e))}catch(t){s(t)}}function l(e){try{c(r["throw"](e))}catch(t){s(t)}}function c(e){e.done?n(e.value):o(e.value).then(i,l)}c((r=r.apply(e,t||[])).next())}))};const st=(0,r.aZ)({name:"checkGetUnusedAddresses",props:{getUnusedAddresses:{type:Function,required:!0},logIdSuffix:{type:String,required:!0}},components:{ApiTestUi:le},setup(e){const{getLog:t,clearLog:n,addLogSucceeded:r,addLogError:o}=U(),s=(0,l.qj)(S("getUnusedAddresses","Check",["- check getUnusedAddresses function return types and cbor"])),i=s.label,c=t(i),u=(0,l.iH)(!1),a=(0,l.Fl)((()=>c.filter((e=>e.level===g.error||e.level<=(u.value?g.error:g.important)))));function d(){n(i),T(s,L.idle)}function f(e){o(i,"<b>"+e+"</b>"),T(s,L.failed)}function p(){return ot(this,void 0,void 0,(function*(){d(),T(s,L.running);try{let t=yield E(i,"getUnusedAddresses",e.getUnusedAddresses);if(!B(t))return f("getUnusedAddresses: return type not an array");r(i,'&bull; "getUnusedAddresses" returned: '+t);for(const e of t){const t=Ce(e);r(i,"&bull; addr valid cbor"),Ee(i,t)}}catch(t){return o(i,"getUnusedAddresses: error: "+JSON.stringify(t,null,2)),f(t.message)}T(s,L.succeeded)}))}return d(),G(s),p(),{logs:a,showAllLogs:u,apiTest:s,performCheck:p}}}),it=(0,te.Z)(st,[["render",rt]]),lt=it;function ct(e,t,n,o,s,i){const l=(0,r.up)("api-test-ui");return(0,r.wg)(),(0,r.j4)(l,{"api-test":e.apiTest,"perform-check":e.performCheck},null,8,["api-test","perform-check"])}var ut=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function i(e){try{c(r.next(e))}catch(t){s(t)}}function l(e){try{c(r["throw"](e))}catch(t){s(t)}}function c(e){e.done?n(e.value):o(e.value).then(i,l)}c((r=r.apply(e,t||[])).next())}))};const at=(0,r.aZ)({name:"checkGetRewardAddress",props:{getRewardAddress:{type:Function,required:!0},logIdSuffix:{type:String,required:!0}},components:{ApiTestUi:le},setup(e){const{getLog:t,clearLog:n,addLogSucceeded:r,addLogError:o}=U(),s=(0,l.qj)(S("getRewardAddress","Check",["- check getRewardAddress function return types and cbor"])),i=s.label,c=t(i),u=(0,l.iH)(!1),a=(0,l.Fl)((()=>c.filter((e=>e.level===g.error||e.level<=(u.value?g.error:g.important)))));function d(){n(i),T(s,L.idle)}function f(e){o(i,"<b>"+e+"</b>"),T(s,L.failed)}function p(){return ut(this,void 0,void 0,(function*(){d(),T(s,L.running);try{let t=yield E(i,"getRewardAddress",e.getRewardAddress);if(!Z(t))return f("getRewardAddress: return type not an array");r(i,'&bull; "getRewardAddress" returned: '+t);const n=Ce(t);r(i,"&bull; addr valid cbor"),Ee(i,n)}catch(t){return o(i,"getRewardAddress: error: "+JSON.stringify(t,null,2)),f(t.message)}T(s,L.succeeded)}))}return d(),G(s),p(),{logs:a,showAllLogs:u,apiTest:s,performCheck:p}}}),dt=(0,te.Z)(at,[["render",ct]]),gt=dt;function ft(e,t,n,o,s,i){const l=(0,r.up)("api-test-ui");return(0,r.wg)(),(0,r.j4)(l,{"api-test":e.apiTest,"perform-check":e.performCheck},null,8,["api-test","perform-check"])}var pt=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function i(e){try{c(r.next(e))}catch(t){s(t)}}function l(e){try{c(r["throw"](e))}catch(t){s(t)}}function c(e){e.done?n(e.value):o(e.value).then(i,l)}c((r=r.apply(e,t||[])).next())}))};const ht=(0,r.aZ)({name:"checkGetChangeAddress",props:{getChangeAddress:{type:Function,required:!0},logIdSuffix:{type:String,required:!0}},components:{ApiTestUi:le},setup(e){const{getLog:t,clearLog:n,addLogSucceeded:r,addLogError:o}=U(),s=(0,l.qj)(S("getChangeAddress","Check",["- check getChangeAddress function return types and cbor"])),i=s.label,c=t(i),u=(0,l.iH)(!1),a=(0,l.Fl)((()=>c.filter((e=>e.level===g.error||e.level<=(u.value?g.error:g.important)))));function d(){n(i),T(s,L.idle)}function f(e){o(i,"<b>"+e+"</b>"),T(s,L.failed)}function p(){return pt(this,void 0,void 0,(function*(){d(),T(s,L.running);try{let t=yield E(i,"getChangeAddress",e.getChangeAddress);if(!Z(t))return f("getChangeAddress: return type not an string");r(i,'&bull; "getChangeAddress" returned: '+t);const n=Ce(t);r(i,"&bull; addr valid cbor"),Ee(i,n)}catch(t){return o(i,"getChangeAddress: error: "+JSON.stringify(t,null,2)),f(t.message)}T(s,L.succeeded)}))}return d(),G(s),p(),{logs:a,showAllLogs:u,apiTest:s,performCheck:p}}}),bt=(0,te.Z)(ht,[["render",ft]]),mt=bt;function yt(e,t,n,o,s,i){const l=(0,r.up)("api-test-ui");return(0,r.wg)(),(0,r.j4)(l,{"api-test":e.apiTest,"perform-check":e.performCheck},null,8,["api-test","perform-check"])}var kt=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function i(e){try{c(r.next(e))}catch(t){s(t)}}function l(e){try{c(r["throw"](e))}catch(t){s(t)}}function c(e){e.done?n(e.value):o(e.value).then(i,l)}c((r=r.apply(e,t||[])).next())}))};const wt=(0,r.aZ)({name:"checkSignData",props:{signData:{type:Function,required:!0},addr:{type:String,required:!0},logIdSuffix:{type:String,required:!0}},components:{ApiTestUi:le},setup(e){const{getLog:t,clearLog:n,addLogSucceeded:r,addLogError:o}=U(),s=(0,l.qj)(S("signData","Check",["- check signData popup"])),i=s.label,c=t(i),u=(0,l.iH)(!1),a=(0,l.iH)(null),d=(0,l.Fl)((()=>c.filter((e=>e.level===g.error||e.level<=(u.value?g.error:g.important)))));function f(){n(i),a.value=null,T(s,L.idle)}function p(e){o(i,"<b>"+e+"</b>"),T(s,L.failed)}function h(){return kt(this,void 0,void 0,(function*(){f(),T(s,L.running);try{let t=yield E(i,"signData",e.signData,[e.addr,ye.lW.from("hello").toString("hex")]);if(!R(t))return p("signData: return type not object");const n=JSON.stringify(t,null,2);r(i,'&bull; "signData" signedData: '+t),a.value=n,w(i,n)}catch(t){return a.value=null,o(i,"signData: error: "+JSON.stringify(t,null,2)),p(t.message)}T(s,L.succeeded)}))}return f(),G(s),{logs:d,showAllLogs:u,apiTest:s,performCheck:h}}}),xt=(0,te.Z)(wt,[["render",yt]]),vt=xt;function At(e,t,n,o,s,i){const l=(0,r.up)("api-test-ui"),c=(0,r.up)("check-submit-tx");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(l,{"api-test":e.apiTest,"perform-check":e.performCheck},null,8,["api-test","perform-check"]),e.serializedTx&&e.submitTx?((0,r.wg)(),(0,r.j4)(c,{key:0,"log-id-suffix":e.logIdSuffix,"serialized-tx":e.serializedTx,"submit-tx":e.submitTx},null,8,["log-id-suffix","serialized-tx","submit-tx"])):(0,r.kq)("",!0)],64)}function Ct(e,t,n,o,s,i){const l=(0,r.up)("api-test-ui");return(0,r.wg)(),(0,r.j4)(l,{"api-test":e.apiTest,"perform-check":e.performCheck},null,8,["api-test","perform-check"])}var Ut=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function i(e){try{c(r.next(e))}catch(t){s(t)}}function l(e){try{c(r["throw"](e))}catch(t){s(t)}}function c(e){e.done?n(e.value):o(e.value).then(i,l)}c((r=r.apply(e,t||[])).next())}))};const Lt=(0,r.aZ)({name:"checkSubmitTx",props:{submitTx:{type:Function,required:!0},serializedTx:{type:String,required:!0},logIdSuffix:{type:String,required:!0}},components:{ApiTestUi:le},setup(e){const{getLog:t,clearLog:n,addLogSucceeded:r,addLogError:o}=U(),s=(0,l.qj)(S("submitTx","Check",["- check submitTx"])),i=s.label,c=t(i),u=(0,l.iH)(!1),a=(0,l.Fl)((()=>c.filter((e=>e.level===g.error||e.level<=(u.value?g.error:g.important)))));function d(){n(i),T(s,L.idle)}function f(e){o(i,"<b>"+e+"</b>"),T(s,L.failed)}function p(){return Ut(this,void 0,void 0,(function*(){d(),T(s,L.running);try{let t=yield E(i,"submitTx",e.submitTx,[e.serializedTx]);if(!Z(t))return f("submitTx: return type not string");r(i,'&bull; "submitTx" returned: '+t),w(i,t)}catch(t){return o(i,"submitTx: error: "+JSON.stringify(t,null,2)),f(t.message)}T(s,L.succeeded)}))}return d(),G(s),{logs:a,showAllLogs:u,apiTest:s,performCheck:p}}}),St=(0,te.Z)(Lt,[["render",Ct]]),Tt=St;var Ft=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function i(e){try{c(r.next(e))}catch(t){s(t)}}function l(e){try{c(r["throw"](e))}catch(t){s(t)}}function c(e){e.done?n(e.value):o(e.value).then(i,l)}c((r=r.apply(e,t||[])).next())}))};const It=(0,r.aZ)({name:"checkSignTx",props:{signTx:{type:Function,required:!0},submitTx:{type:Function,required:!0},logIdSuffix:{type:String,required:!0}},components:{ApiTestUi:le,CheckSubmitTx:Tt},setup(e){const{getLog:t,clearLog:n,addLogSucceeded:r,addLogError:o}=U(),s=(0,l.qj)(S("signTx","Check",["- check signTx popup"])),i=s.label,c=t(i),u=(0,l.iH)(!1),a=(0,l.iH)(null),d=(0,l.iH)(null),f=(0,l.iH)(null),p=(0,l.Fl)((()=>c.filter((e=>e.level===g.error||e.level<=(u.value?g.error:g.important)))));function h(){n(i),a.value=null,d.value=null,f.value=null,T(s,L.idle)}function b(e){o(i,"<b>"+e+"</b>"),T(s,L.failed)}function m(){return Ft(this,void 0,void 0,(function*(){h(),T(s,L.running);try{let t=yield E(i,"signTx",e.signTx,["",!1,!0]);if(!Z(t))return b("signTx: return type not string");if(r(i,'&bull; "signTx" txBody: '+t),a.value=t,t=yield E(i,"signTx",e.signTx,[a.value,!1]),!Z(t))return b("signTx: return type not string");r(i,'&bull; "signTx" witnesses: '+t),d.value=t,w(i,t),f.value=De(i,a.value,d.value)}catch(t){return f.value=null,o(i,"signTx: error: "+JSON.stringify(t,null,2)),b(t.message)}T(s,L.succeeded)}))}return h(),G(s),{logs:p,showAllLogs:u,apiTest:s,performCheck:m,txBody:a,witnesses:d,serializedTx:f}}}),qt=(0,te.Z)(It,[["render",At]]),jt=qt;var Ht=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function i(e){try{c(r.next(e))}catch(t){s(t)}}function l(e){try{c(r["throw"](e))}catch(t){s(t)}}function c(e){e.done?n(e.value):o(e.value).then(i,l)}c((r=r.apply(e,t||[])).next())}))};const Nt=(0,r.aZ)({name:"checkFullApiLegacy",components:{ApiTestUi:le,CheckGetNetworkId:be,CheckGetBalance:Be,CheckGetUtxos:Ke,CheckGetUsedAddresses:nt,CheckGetUnusedAddresses:lt,CheckGetRewardAddress:gt,CheckGetChangeAddress:mt,CheckSignData:vt,CheckSignTx:jt},setup(){const{getLog:e,clearLog:t,addLogImportant:n,addLogSucceeded:r,addLogError:o}=U(),s=(0,l.qj)(S("Full API: Legacy","enable()",["- check all API function return types"])),i=s.label,c=e(i),u=(0,l.iH)(!1),a=(0,l.iH)(null),d=(0,l.iH)(null),f=(0,l.iH)(null),p=(0,l.iH)(null),h=(0,l.iH)(null),b=(0,l.iH)(null),m=(0,l.iH)(null),y=(0,l.iH)(null),k=(0,l.iH)(null),w=(0,l.iH)(null),x=(0,l.iH)(null),v=(0,l.Fl)((()=>c.filter((e=>e.level===g.error||e.level<=(u.value?g.error:g.important)))));function A(){t(i),a.value=null,d.value=null,f.value=null,p.value=null,h.value=null,b.value=null,m.value=null,y.value=null,w.value=null,x.value=null,T(s,L.idle)}function C(){return Ht(this,void 0,void 0,(function*(){A(),T(s,L.running);const e=window.cardano;let t;try{if(t=yield e.isEnabled(),!D(t))return o(i,"isEnabled: return type not boolean");r(i,"isEnabled() returned: "+t)}catch(l){o(i,"isEnabled: error: "+JSON.stringify(l,null,2))}try{if(t=yield e.enable(),!R(t)&&!D(t))return o(i,"enable: return type not object or boolean");r(i,"enable() returned: "+t)}catch(l){o(i,"enable: error: "+JSON.stringify(l,null,2))}a.value=e.getNetworkId,d.value=e.getBalance,f.value=e.getUtxos,p.value=e.getUsedAddresses,h.value=e.getUnusedAddresses,b.value=e.getRewardAddress,m.value=e.getChangeAddress,y.value=e.signData,w.value=e.signTx,x.value=e.submitTx,n(i,"<b><i>Legacy API ready to check.</i></b>"),T(s,L.succeeded)}))}function F(e){console.log("onUsedAddress:",e.addr),k.value=e.addr}return A(),G(s),C(),{logs:v,showAllLogs:u,apiTest:s,performCheck:C,getNetworkIdFunction:a,getBalanceFunction:d,getUtxosFunction:f,getUsedAddressesFunction:p,onUsedAddress:F,getUnusedAddressesFunction:h,getRewardAddressFunction:b,getChangeAddressFunction:m,signDataFunction:y,signDataAddress:k,signTxFunction:w,submitTxFunction:x}}}),Et=(0,te.Z)(Nt,[["render",de]]),Pt=Et;function Dt(e,t,n,o,s,i){const l=(0,r.up)("api-test-ui"),c=(0,r.up)("check-get-network-id"),u=(0,r.up)("check-get-balance"),a=(0,r.up)("check-get-utxos"),d=(0,r.up)("check-get-used-addresses"),g=(0,r.up)("check-get-unused-addresses"),f=(0,r.up)("check-get-reward-addresses"),p=(0,r.up)("check-get-change-address"),h=(0,r.up)("check-sign-data"),b=(0,r.up)("check-sign-tx");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(l,{"api-test":e.apiTest,"perform-check":e.performCheck},null,8,["api-test","perform-check"]),e.getNetworkIdFunction?((0,r.wg)(),(0,r.j4)(c,{key:0,"log-id-suffix":"CIP","get-network-id":e.getNetworkIdFunction},null,8,["get-network-id"])):(0,r.kq)("",!0),e.getBalanceFunction?((0,r.wg)(),(0,r.j4)(u,{key:1,"log-id-suffix":"CIP","get-balance":e.getBalanceFunction},null,8,["get-balance"])):(0,r.kq)("",!0),e.getUtxosFunction?((0,r.wg)(),(0,r.j4)(a,{key:2,"log-id-suffix":"CIP","get-utxos":e.getUtxosFunction},null,8,["get-utxos"])):(0,r.kq)("",!0),e.getUsedAddressesFunction?((0,r.wg)(),(0,r.j4)(d,{key:3,"log-id-suffix":"CIP","get-used-addresses":e.getUsedAddressesFunction,onOnUsedAddress:e.onUsedAddress},null,8,["get-used-addresses","onOnUsedAddress"])):(0,r.kq)("",!0),e.getUnusedAddressesFunction?((0,r.wg)(),(0,r.j4)(g,{key:4,"log-id-suffix":"CIP","get-unused-addresses":e.getUnusedAddressesFunction},null,8,["get-unused-addresses"])):(0,r.kq)("",!0),e.getRewardAddressesFunction?((0,r.wg)(),(0,r.j4)(f,{key:5,"log-id-suffix":"CIP","get-reward-addresses":e.getRewardAddressesFunction},null,8,["get-reward-addresses"])):(0,r.kq)("",!0),e.getChangeAddressFunction?((0,r.wg)(),(0,r.j4)(p,{key:6,"log-id-suffix":"CIP","get-change-address":e.getChangeAddressFunction},null,8,["get-change-address"])):(0,r.kq)("",!0),e.signDataFunction&&e.signDataAddress?((0,r.wg)(),(0,r.j4)(h,{key:7,"log-id-suffix":"CIP","sign-data":e.signDataFunction,addr:e.signDataAddress},null,8,["sign-data","addr"])):(0,r.kq)("",!0),e.signTxFunction&&e.submitTxFunction?((0,r.wg)(),(0,r.j4)(b,{key:8,"log-id-suffix":"CIP","sign-tx":e.signTxFunction,"submit-tx":e.submitTxFunction},null,8,["sign-tx","submit-tx"])):(0,r.kq)("",!0)],64)}function _t(e,t,n,o,s,i){const l=(0,r.up)("api-test-ui");return(0,r.wg)(),(0,r.j4)(l,{"api-test":e.apiTest,"perform-check":e.performCheck},null,8,["api-test","perform-check"])}var Zt=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function i(e){try{c(r.next(e))}catch(t){s(t)}}function l(e){try{c(r["throw"](e))}catch(t){s(t)}}function c(e){e.done?n(e.value):o(e.value).then(i,l)}c((r=r.apply(e,t||[])).next())}))};const Rt=(0,r.aZ)({name:"checkGetRewardAddresses",props:{getRewardAddresses:{type:Function,required:!0},logIdSuffix:{type:String,required:!0}},components:{ApiTestUi:le},setup(e){const{getLog:t,clearLog:n,addLogSucceeded:r,addLogError:o}=U(),s=(0,l.qj)(S("getRewardAddresses","Check",["- check getRewardAddresses function return types and cbor"])),i=s.label,c=t(i),u=(0,l.iH)(!1),a=(0,l.Fl)((()=>c.filter((e=>e.level===g.error||e.level<=(u.value?g.error:g.important)))));function d(){n(i),T(s,L.idle)}function f(e){o(i,"<b>"+e+"</b>"),T(s,L.failed)}function p(){return Zt(this,void 0,void 0,(function*(){d(),T(s,L.running);try{let t=yield E(i,"getRewardAddresses",e.getRewardAddresses);if(!B(t))return f("getRewardAddresses: return type not an array");r(i,'&bull; "getRewardAddresses" returned: '+t);for(const e of t){const t=Ce(e);r(i,"&bull; addr valid cbor"),Ee(i,t)}}catch(t){return o(i,"getRewardAddresses: error: "+JSON.stringify(t,null,2)),f(t.message)}T(s,L.succeeded)}))}return d(),G(s),p(),{logs:a,showAllLogs:u,apiTest:s,performCheck:p}}}),Bt=(0,te.Z)(Rt,[["render",_t]]),Ot=Bt;var Gt=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function i(e){try{c(r.next(e))}catch(t){s(t)}}function l(e){try{c(r["throw"](e))}catch(t){s(t)}}function c(e){e.done?n(e.value):o(e.value).then(i,l)}c((r=r.apply(e,t||[])).next())}))};const Wt=(0,r.aZ)({name:"checkFullApiCip",components:{ApiTestUi:le,CheckGetNetworkId:be,CheckGetBalance:Be,CheckGetUtxos:Ke,CheckGetUsedAddresses:nt,CheckGetUnusedAddresses:lt,CheckGetRewardAddresses:Ot,CheckGetChangeAddress:mt,CheckSignData:vt,CheckSignTx:jt},props:{walletName:{type:String,required:!0}},setup(e){const{getLog:t,clearLog:n,addLogImportant:r,addLogSucceeded:o,addLogError:s}=U(),i=(0,l.qj)(S("Full API: CIP","enable()",["- check all API function return types"])),c=i.label,u=t(c),a=(0,l.iH)(!1),d=(0,l.iH)(null),f=(0,l.iH)(null),p=(0,l.iH)(null),h=(0,l.iH)(null),b=(0,l.iH)(null),m=(0,l.iH)(null),y=(0,l.iH)(null),k=(0,l.iH)(null),w=(0,l.iH)(null),x=(0,l.iH)(null),v=(0,l.iH)(null),A=(0,l.Fl)((()=>u.filter((e=>e.level===g.error||e.level<=(a.value?g.error:g.important)))));function C(){n(c),d.value=null,f.value=null,p.value=null,h.value=null,b.value=null,m.value=null,y.value=null,k.value=null,x.value=null,v.value=null,T(i,L.idle)}function F(e){s(c,"<b>"+e+"</b>"),T(i,L.failed)}function I(){return Gt(this,void 0,void 0,(function*(){C(),T(i,L.running);window.cardano;if("object"!==typeof window.cardano[e.walletName])return F("walletName obj missing in window.cardano.");o(c,e.walletName+" object present.");const t=window.cardano[e.walletName];let n;try{if(n=yield t.isEnabled(),!D(n))return s(c,"isEnabled: return type not boolean");o(c,"isEnabled() returned: "+n)}catch(l){s(c,"isEnabled: error: "+JSON.stringify(l,null,2))}try{const e=yield t.enable();if(!R(e))return s(c,"enable: return type not object");o(c,"enable() returned: "+e),d.value=e.getNetworkId.bind(e),f.value=e.getBalance.bind(e),p.value=e.getUtxos.bind(e),h.value=e.getUsedAddresses.bind(e),b.value=e.getUnusedAddresses.bind(e),m.value=e.getRewardAddresses.bind(e),y.value=e.getChangeAddress.bind(e),k.value=e.signData.bind(e),x.value=e.signTx.bind(e),v.value=e.submitTx.bind(e)}catch(l){s(c,"enable: error: "+l+" code: "+l.code+" info: "+l.info)}r(c,"<b><i>CIP API ready to check.</i></b>"),T(i,L.succeeded)}))}function q(e){console.log("onUsedAddress:",e.addr),w.value=e.addr}return C(),G(i),I(),{logs:A,showAllLogs:a,apiTest:i,performCheck:I,getNetworkIdFunction:d,getBalanceFunction:f,getUtxosFunction:p,getUsedAddressesFunction:h,onUsedAddress:q,getUnusedAddressesFunction:b,getRewardAddressesFunction:m,getChangeAddressFunction:y,signDataFunction:k,signDataAddress:w,signTxFunction:x,submitTxFunction:v}}}),Jt=(0,te.Z)(Wt,[["render",Dt]]),zt=Jt,Yt=(0,r.aZ)({name:"CIP30Test",components:{checkInitialApi:ae,checkFullApiLegacy:Pt,checkFullApiCip:zt},setup(e){const t=(0,l.iH)(!1),n=(0,l.iH)(!1),r=(0,l.iH)(null);function o(e){"legacy"===e?(n.value=!1,t.value=!0):(t.value=!1,e?(r.value=e,n.value=!0):n.value=!1)}return{showFullLegacyCheck:t,showFullCIPCheck:n,cipWalletName:r,onConnect:o}}}),Vt=(0,te.Z)(Yt,[["render",i]]),Mt=Vt}}]);